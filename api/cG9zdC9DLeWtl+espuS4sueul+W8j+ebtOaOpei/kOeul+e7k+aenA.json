{"title":"C#字符串算式直接运算结果","date":"2011-08-19T10:24:49.000Z","slug":"C-字符串算式直接运算结果","updated":"2019-06-03T10:34:38.439Z","content":"<p>有些似乎后会遇到一种情况，就是要求，一个字符串形式的四则运算，直接求出结果，以前在C#中使用js反射实现，现在发现了一种新的方法，更方便：</p>\n<p>界面上的元素<br><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Label :name=result;<span class=\"comment\">//显示表达式结果</span></span><br><span class=\"line\"></span><br><span class=\"line\">TextBox :name=expressiontext;<span class=\"comment\">//表达式</span></span><br></pre></td></tr></table></figure></p>\n<p>代码只有一句：</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">result.Text = <span class=\"keyword\">new</span> DataTable().Compute(expressiontext.Text, <span class=\"keyword\">string</span>.Empty).ToString();</span><br></pre></td></tr></table></figure>\n<p>测试了一下，正常的+-/*都可以的，支持带括号运算方式，不支持%运算，其他未测试。</p>\n","prev":{"title":"MBTI","slug":"MBTI"},"next":{"title":"程序员的午夜一秒谜案：1927年12月31日","slug":"19271231"},"link":"http://ojdev.github.io/post/C-字符串算式直接运算结果/"}