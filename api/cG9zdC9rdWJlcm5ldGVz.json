{"title":"在windows上创建kubernetes集群","date":"2019-05-22T08:59:56.000Z","slug":"kubernetes","tags":["hyperV, minikube, kubernetes, windows10"],"updated":"2019-05-23T03:17:36.082Z","content":"<h1 id=\"环境\">环境<a href=\"post/kubernetes#环境\"></a></h1><blockquote>\n<p>Windows 10 Pro 1903<br><a href=\"https://github.com/kubernetes/minikube\" target=\"_blank\" rel=\"noopener\">Minikube</a><br>代理环境（127.0.0.1:1080）</p>\n</blockquote>\n<h1 id=\"准备工作\">准备工作<a href=\"post/kubernetes#准备工作\"></a></h1><h2 id=\"下载minikube\">下载minikube<a href=\"post/kubernetes#下载minikube\"></a></h2><p><a href=\"https://github.com/kubernetes/minikube/releases/tag/v1.1.0\" target=\"_blank\" rel=\"noopener\">Release</a><br>下载最新的版本，保存到F:\\k8s文件夹中，并重命名为<code>mikikube</code></p>\n<p>在小娜哪里搜索env，选择<code>编辑系统环境变量</code>,在path节点中增加<code>F:\\k8s</code>；增加新的环境变量<code>MINIKUBE_HOME</code>值为<code>F:\\\\k8s</code>(注意是双斜杠)</p>\n<p>打开命令提示行，推荐<a href=\"https://github.com/microsoft/terminal\" target=\"_blank\" rel=\"noopener\">terminal</a></p>\n<p>对minikube进行配置:</p>\n<p>使用hyperv创建<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube config <span class=\"built_in\">set</span> vm-driver hyperv</span><br></pre></td></tr></table></figure></p>\n<p>hyperV的交换机名成<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube config <span class=\"built_in\">set</span> hyperv-virtual-switch <span class=\"string\">\"Default Switch\"</span></span><br></pre></td></tr></table></figure></p>\n<p> 有空格需要用双引号包起来</p>\n<h2 id=\"创建集群\">创建集群<a href=\"post/kubernetes#创建集群\"></a></h2><p>因为需要从google下载iso，所以需要一个代理<br> <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> HTTPS_PROXY=127.0.0.1:1080</span><br><span class=\"line\"><span class=\"built_in\">set</span> HTTP_PROXY=192.168.0.252:1081</span><br><span class=\"line\"><span class=\"built_in\">set</span> NO_PROXY=172.17.0.0/12,localhost,127.0.0.1,192.168.0.1/24</span><br></pre></td></tr></table></figure></p>\n<p>172.17.0.0/12是minikube的ip段，是不需要代理的，其他的是本地资源的地址也是不需要代理的，如果不写NO_PROXY，创建集群的时候可能会出现问题</p>\n<p> 或者手动下载iso放到本地的服务器<br> <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube config <span class=\"built_in\">set</span> iso-url http://127.0.0.1/minikube-v1.1.0.iso</span><br></pre></td></tr></table></figure></p>\n<p>推荐使用本地服务器</p>\n<p>开始创建集群</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minikube start</span><br></pre></td></tr></table></figure>","next":{"title":"canpian-11","slug":"canpian-11"},"link":"http://ojdev.github.io/post/kubernetes/","toc":[{"title":"环境","id":"环境","index":"1"},{"title":"准备工作","id":"准备工作","index":"2","children":[{"title":"下载minikube","id":"下载minikube","index":"2.1"},{"title":"创建集群","id":"创建集群","index":"2.2"}]}]}